<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<h1 class="container text-center">Admin Dashboard</h1>

<section id="users" class="container">

</section>

<section id="all-tickets" class="container">
  <p>
    <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#ticket-table" aria-expanded="false" aria-controls="collapseExample">
    Ticket Index
    </button>
</p>
<div class="collapse" id="ticket-table">
  <div class="card card-body">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Ticket Number</th>
          <th scope="col">Date</th>
          <th scope="col">Employee</th>
          <th scope="col">Amount</th>
          <th scope="col">Edit</th>
          <th scope="col">Delete</th>
        </tr>
      </thead>
      <tbody>
        <% tickets.forEach(ticket => { %>
          <tr>
            <th scope="row"><%= ticket.ticketNumber %></th>
            <td><%= ticket.createdAt.toLocaleString() %></td>
            <td><%= ticket.employee %></td>
            <td><%= ticket.amount %></td>
            <td><a href="/tickets/<%= ticket._id %>/edit"><button class="btn btn-outline-dark">Edit</button></a></td>
            <td>
              <form action="/tickets/<%= ticket._id %>?_method=DELETE" method="POST">
                <button class="btn btn-outline-dark delete-btn">Delete</button>
              </form>
            </td>
          </tr>
        <% }) %> 
      </tbody>
    </table>
  </div>
</div>
</section>

<%- include('../partials/footer') %>